import"./validators-BJEf8OaU.js";import{_ as q}from"./AppTextField.vue_vue_type_script_setup_true_lang-DSuqYEFH.js";import{u as F,_ as P,a as D}from"./useAbility-DTDJ_1A-.js";import{a as L,b as j}from"./auth-v1-top-shape-0NcaQZ_m.js";import{V as _}from"./VNodeRenderer-DmRVuQ8d.js";import{d as E,r as m,u as U,j as M,b5 as r,dQ as H,bf as I,b0 as g,a as O,c as z,o as f,g as k,l as V,e as s,m as a,b as o,L as N,f as l,H as h,v as A,t as $,x as G,F as K,dA as b}from"./index-QmjfWG9k.js";import{$ as Q}from"./api-B08WS8X5.js";import{a as W,c as X,V as Y}from"./VCard-C4L9MAHv.js";import{V as T}from"./VCardText-bGRz6xKr.js";import"./VRow-RRbVfJJn.js";import"./VCheckbox-DdW7dJuf.js";import"./VDivider-CfvQjMre.js";import"./helpers-BGv4x_9E.js";import"./VTextField-qyLS7QbK.js";/* empty css                   */import"./VCounter-SZ7Fbtdw.js";import"./transition-TDW7B4ca.js";import"./VField-BS5EyH5r.js";import"./form-B3Gf1S-W.js";import"./easing-Bybner-F.js";import"./VInput-Dmcj4ydN.js";import"./forwardRefs-C-GTDzx5.js";import"./index-x5qq67U0.js";import"./index-CvOPxmL5.js";import"./VAvatar-BqY6RbRR.js";import"./VImg-DS1TJL9Y.js";/* empty css              */import"./VCheckboxBtn-CzNJPbLQ.js";import"./VSelectionControl-DTyjgom5.js";const J={class:"auth-wrapper d-flex align-center justify-center pa-4"},Z={class:"position-relative my-sm-16"},ee={class:"app-logo"},te={class:"app-logo-title"},ae={class:"text-h4 mb-1"},oe={class:"text-capitalize"};const Oe=E({__name:"login",async setup(re){let x,v;const se=m(!1),n=U(),w=M(),y=F(),S=m({email:void 0,password:void 0}),B=m(),C=m({email:"",password:"",remember:!1}),R=async()=>{try{const e=await Q("/auth/login",{method:"POST",body:{email:C.value.email,password:C.value.password},onResponseError({response:u}){S.value=u._data.errors}}),{accessToken:t,userData:i,userAbilityRules:d}=e;r("brevo_userAbilityRules",{maxAge:b}).value=d,y.update(d),r("brevo_userData",{maxAge:b}).value=i,r("brevo_accessToken",{maxAge:b}).value=t,await g(()=>{w.replace(n.query.to?String(n.query.to):"/")})}catch(e){console.error(e)}},le=()=>{var e;(e=B.value)==null||e.validate().then(({valid:t})=>{t&&R()})},c=r("brevo_jwt",{domain:".apps.onylab.com"}).value;if(typeof c=="string"){H();const e=c,t=[{action:"manage",subject:"all"}],i={id:1,fullName:"",username:"",avatar:void 0,email:"",role:"admin"};r("brevo_userAbilityRules").value=t,y.update(t),r("brevo_userData").value=i,r("brevo_accessToken").value=e,[x,v]=I(()=>g(()=>{w.replace(n.query.to?String(n.query.to):"/")})),await x,v()}else window.location.href="https://login.apps.onylab.com/auth/?app=brevo";return(e,t)=>{const i=P,d=D,u=O("RouterLink"),ie=q;return f(),z(K,null,[a(c)?(f(),k(i,{key:0})):V("",!0),a(c)?(f(),k(d,{key:1})):V("",!0),s("div",J,[s("div",Z,[o(a(_),{nodes:("h"in e?e.h:a(N))("div",{innerHTML:a(L)}),class:"text-primary auth-v1-top-shape d-none d-sm-block"},null,8,["nodes"]),o(a(_),{nodes:("h"in e?e.h:a(N))("div",{innerHTML:a(j)}),class:"text-primary auth-v1-bottom-shape d-none d-sm-block"},null,8,["nodes"]),o(Y,{class:G([e.$vuetify.display.smAndUp?"pa-6":"pa-0","auth-card"]),"max-width":"460"},{default:l(()=>[o(W,{class:"justify-center"},{default:l(()=>[o(X,null,{default:l(()=>[o(u,{to:"/"},{default:l(()=>[s("div",ee,[o(a(_),{nodes:a(h).app.logo},null,8,["nodes"]),s("h1",te,A(a(h).app.title),1)])]),_:1})]),_:1})]),_:1}),o(T,null,{default:l(()=>[s("h4",ae,[t[4]||(t[4]=$(" Welcome to ")),s("span",oe,A(a(h).app.title),1),t[5]||(t[5]=$("! ðŸ‘‹ðŸ» "))]),t[6]||(t[6]=s("p",{class:"mb-0"},null,-1))]),_:1,__:[6]}),o(T,null,{default:l(()=>[V("",!0)]),_:1})]),_:1},8,["class"])])])],64)}}});export{Oe as default};
